var CE_CACHE=CE_CACHE||{};CE_CACHE.viewItems=function(){var e=$("[data-ce-cache-view-items]");if(e.length){var r={},s=e.attr("data-var");s&&(r=window[s]),new Vue({el:e[0],data:{lang:r.lang,items:[],breadcrumbs:[],errorMessage:"",deleteItemCandidate:null,deleteItemCanRefresh:!1,deleteRefresh:!1,deleteRefreshTime:15,isRequestInProgress:!1},methods:{getLevel:function(e){var s=this;this.isRequestInProgress=!0,$.jsonp({url:r.urls.getLevel,data:{path:e,prefix:r.prefix,driver:r.driver,secret:r.secret},cache:!1,callbackParameter:"callback",success:function(e){s.isRequestInProgress=!1,e&&e.success?(e.hasOwnProperty("data")&&(e.data.hasOwnProperty("items")&&(s.items=e.data.items),e.data.hasOwnProperty("breadcrumbs")&&(s.breadcrumbs=e.data.breadcrumbs)),s.errorMessage=""):s.errorMessage=e.hasOwnProperty("message")&&e.message?e.message:r.lang.unknown_error},error:function(e,r){s.isRequestInProgress=!1,s.errorMessage=r}})},deleteItem:function(e,s,t,a){var i=this;this.isRequestInProgress=!0,$.jsonp({url:r.urls.deleteItem,data:{path:e,prefix:r.prefix,driver:r.driver,secret:r.secret,refresh:t,refresh_time:a},cache:!1,callbackParameter:"callback",success:function(e){if(i.isRequestInProgress=!1,e.success){var t=i.items.indexOf(s);t>-1&&i.items.splice(t,1),i.errorMessage=""}else i.errorMessage=e.hasOwnProperty("message")&&e.message?e.message:r.lang.unknown_error},error:function(e,r){i.isRequestInProgress=!1,i.errorMessage=r}})},itemViewLink:function(e){return r.urls.home+"/view_item/"+r.driver+"&item="+r.prefix+e},deleteStarted:function(e){this.deleteItemCandidate=e,this.deleteItemCanRefresh="global"!==e.id_full.substring(0,6),this.deleteRefresh=!1,this.deleteRefreshTime="folder"===e.type?15:0,$(this.$refs.modalTrigger).trigger("click")},deleteConfirmed:function(){$(this.$refs.modalClose).trigger("click"),this.deleteItem(this.deleteItemCandidate.id_full,this.deleteItemCandidate,this.deleteRefresh,this.deleteRefreshTime)}},created:function(){this.getLevel("/")}})}},CE_CACHE.viewItems();
//# sourceMappingURL=ce_cache_view_items.min.js.map
