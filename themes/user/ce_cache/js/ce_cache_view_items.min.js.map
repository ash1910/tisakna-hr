{"version":3,"sources":["ce_cache_view_items.min.js"],"names":["CE_CACHE","viewItems","$appEl","$","length","appData","dataVar","attr","window","Vue","el","data","lang","items","breadcrumbs","errorMessage","deleteItemCandidate","deleteItemCanRefresh","deleteRefresh","deleteRefreshTime","isRequestInProgress","methods","getLevel","path","that","this","jsonp","url","urls","prefix","driver","secret","cache","callbackParameter","success","response","hasOwnProperty","message","unknown_error","error","xOptions","textStatus","deleteItem","item","refresh","refresh_time","index","indexOf","splice","itemViewLink","fullPath","home","deleteStarted","id_full","substring","type","$refs","modalTrigger","trigger","deleteConfirmed","modalClose","created"],"mappings":"AAAA,GAAIA,UAAWA,YAEfA,UAASC,UAAY,WACpB,GAAIC,GAASC,EAAE,6BACf,IAAID,EAAOE,OAAQ,CAElB,GAAIC,MAGAC,EAAUJ,EAAOK,KAAK,WACtBD,KACHD,EAAUG,OAAOF,IAGlB,GAAIG,MACHC,GAAIR,EAAO,GACXS,MAECC,KAAMP,EAAQO,KAGdC,SACAC,eAGAC,aAAc,GAGdC,oBAAqB,KACrBC,sBAAsB,EACtBC,eAAe,EACfC,kBAAmB,GAGnBC,qBAAqB,GAEtBC,SAMCC,SAAU,SAASC,GAClB,GAAIC,GAAOC,IACXA,MAAKL,qBAAsB,EAE3BjB,EAAEuB,OACDC,IAAKtB,EAAQuB,KAAKN,SAClBX,MACCY,KAAQA,EACRM,OAAUxB,EAAQwB,OAClBC,OAAUzB,EAAQyB,OAClBC,OAAU1B,EAAQ0B,QAEnBC,OAAO,EACPC,kBAAmB,WACnBC,QAAS,SAAUC,GAClBX,EAAKJ,qBAAsB,EACtBe,GAAYA,EAASD,SACrBC,EAASC,eAAe,UACvBD,EAASxB,KAAKyB,eAAe,WAChCZ,EAAKX,MAAQsB,EAASxB,KAAKE,OAExBsB,EAASxB,KAAKyB,eAAe,iBAChCZ,EAAKV,YAAcqB,EAASxB,KAAKG,cAGnCU,EAAKT,aAAe,IAEpBS,EAAKT,aAAgBoB,EAASC,eAAe,YAAcD,EAASE,QAAWF,EAASE,QAAWhC,EAAQO,KAAK0B,eAGlHC,MAAO,SAASC,EAAUC,GACzBjB,EAAKJ,qBAAsB,EAC3BI,EAAKT,aAAe0B,MAYvBC,WAAY,SAASnB,EAAMoB,EAAMC,EAASC,GACzC,GAAIrB,GAAOC,IACXA,MAAKL,qBAAsB,EAE3BjB,EAAEuB,OACDC,IAAKtB,EAAQuB,KAAKc,WAClB/B,MACCY,KAAQA,EACRM,OAAUxB,EAAQwB,OAClBC,OAAUzB,EAAQyB,OAClBC,OAAU1B,EAAQ0B,OAClBa,QAAWA,EACXC,aAAiBA,GAElBb,OAAO,EACPC,kBAAmB,WACnBC,QAAS,SAAUC,GAElB,GADAX,EAAKJ,qBAAsB,EACtBe,EAASD,QAAU,CACvB,GAAIY,GAAQtB,EAAKX,MAAMkC,QAAQJ,EAC3BG,IAAQ,GACXtB,EAAKX,MAAMmC,OAAOF,EAAO,GAG1BtB,EAAKT,aAAe,OAEpBS,GAAKT,aAAgBoB,EAASC,eAAe,YAAcD,EAASE,QAAWF,EAASE,QAAWhC,EAAQO,KAAK0B,eAGlHC,MAAM,SAAUC,EAAUC,GACzBjB,EAAKJ,qBAAsB,EAC3BI,EAAKT,aAAe0B,MAUvBQ,aAAc,SAAUC,GACvB,MAAO7C,GAAQuB,KAAKuB,KAAK,cAAc9C,EAAQyB,OAAO,SAASzB,EAAQwB,OAAOqB,GAO/EE,cAAe,SAAST,GACvBlB,KAAKT,oBAAsB2B,EAG3BlB,KAAKR,qBAAwD,WAAhC0B,EAAKU,QAAQC,UAAU,EAAE,GAGtD7B,KAAKP,eAAgB,EACrBO,KAAKN,kBAAmC,WAAdwB,EAAKY,KAAqB,GAAK,EAGzDpD,EAAEsB,KAAK+B,MAAMC,cAAcC,QAAQ,UAKpCC,gBAAiB,WAEhBxD,EAAEsB,KAAK+B,MAAMI,YAAYF,QAAQ,SAGjCjC,KAAKiB,WAAWjB,KAAKT,oBAAoBqC,QAAS5B,KAAKT,oBAAqBS,KAAKP,cAAeO,KAAKN,qBAGvG0C,QAAS,WACRpC,KAAKH,SAAS,UAMlBtB,SAASC","file":"ce_cache_view_items.min.js","sourcesContent":["var CE_CACHE=CE_CACHE||{};CE_CACHE.viewItems=function(){var e=$(\"[data-ce-cache-view-items]\");if(e.length){var r={},s=e.attr(\"data-var\");s&&(r=window[s]),new Vue({el:e[0],data:{lang:r.lang,items:[],breadcrumbs:[],errorMessage:\"\",deleteItemCandidate:null,deleteItemCanRefresh:!1,deleteRefresh:!1,deleteRefreshTime:15,isRequestInProgress:!1},methods:{getLevel:function(e){var s=this;this.isRequestInProgress=!0,$.jsonp({url:r.urls.getLevel,data:{path:e,prefix:r.prefix,driver:r.driver,secret:r.secret},cache:!1,callbackParameter:\"callback\",success:function(e){s.isRequestInProgress=!1,e&&e.success?(e.hasOwnProperty(\"data\")&&(e.data.hasOwnProperty(\"items\")&&(s.items=e.data.items),e.data.hasOwnProperty(\"breadcrumbs\")&&(s.breadcrumbs=e.data.breadcrumbs)),s.errorMessage=\"\"):s.errorMessage=e.hasOwnProperty(\"message\")&&e.message?e.message:r.lang.unknown_error},error:function(e,r){s.isRequestInProgress=!1,s.errorMessage=r}})},deleteItem:function(e,s,t,a){var i=this;$.jsonp({url:r.urls.deleteItem,data:{path:e,prefix:r.prefix,driver:r.driver,secret:r.secret,refresh:t,refresh_time:a},cache:!1,callbackParameter:\"callback\",success:function(e){if(e.success){var t=i.items.indexOf(s);t>-1&&i.items.splice(t,1),i.errorMessage=\"\"}else i.errorMessage=e.hasOwnProperty(\"message\")&&e.message?e.message:r.lang.unknown_error},error:function(e,r){i.errorMessage=r}})},itemViewLink:function(e){return r.urls.home+\"/view_item/\"+r.driver+\"&item=\"+r.prefix+e},deleteStarted:function(e){this.deleteItemCandidate=e,this.deleteItemCanRefresh=\"global\"!==e.id_full.substring(0,6),this.deleteRefresh=!1,this.deleteRefreshTime=\"folder\"===e.type?15:0,$(this.$refs.modalTrigger).trigger(\"click\")},deleteConfirmed:function(){$(this.$refs.modalClose).trigger(\"click\"),this.deleteItem(this.deleteItemCandidate.id_full,this.deleteItemCandidate,this.deleteRefresh,this.deleteRefreshTime)}},created:function(){this.getLevel(\"/\")}})}},CE_CACHE.viewItems();\n//# sourceMappingURL=ce_cache_view_items.min.js.map\n"]}